#include<reg52.h>
#include<absacc.h>
#include"frag2.h"
#include"frag3.h"
#include"frag4.h"
unsigned char Column;
unsigned char Page_ ;  // 页地址寄存器 D1,DO:页地址
unsigned char Code_ ;  // 字符代码寄存器
unsigned char Command; // 指令寄存器
unsigned char LCDData; // 数据寄存器
xdata unsigned char CWADD1 _at_ 0x1cff;   // 写指令代码地址(E1)
xdata unsigned char DWADD1 _at_ 0x1eff;   // 写显示数据地址(E1)
xdata unsigned char CRADD1 _at_ 0x1dff;   // 读状态字地址(E1)
xdata unsigned char DRADD1 _at_ 0x1fff;   // 读显示数据地址(E1)									
xdata unsigned char CWADD2 _at_ 0x3cff;   // 写指令代码地址(E2)
xdata unsigned char DWADD2 _at_ 0x3eff;   // 写显示数进地址(E2)
xdata unsigned char CRADD2 _at_ 0x3dff;   // 读状态字地址(E2)
xdata unsigned char DRADD2 _at_ 0x3fff;   // 读显示数据地址(E2)
unsigned char code Disp_Tab2[] = {0x00,0x01,0x02,0x03,0x04,0x05,0x06,0x07,0x08,0x09};
unsigned int bs=0x1B;//BLACKSTAR
unsigned int ws=0X18;//WHITESTAR
unsigned int cs=0;
unsigned int a1=0;//假名CODE 
//中文字模表，根据自己需要更改  
code unsigned char CCTAB[][32]={
						
						{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xFF,//终点 0
						0x3E,0x3C,0x38,0x30,0x20,0x00,0x00,0x00,
						0x00,0x00,0x00,0x80,0x80,0x80,0x80,0xFF,
						0x80,0x80,0x80,0x80,0x80,0x00,0x00,0x00},
						
						{0x00,0x00,0x00,0x30,0xCC,0xCA,0xB9,0x31,//马里奥右静止 1
						0x01,0x59,0x61,0x4A,0xCA,0x4A,0x34,0x00,
						0x00,0x06,0x69,0x91,0x90,0xB8,0x68,0x25,
						0x27,0x4E,0xA4,0xA5,0xAF,0x79,0x32,0x0C},						
												
						{0x00,0x00,0x80,0x30,0xCC,0xCA,0xB9,0x31,//马里奥右奔跑 2
						0x01,0x59,0x62,0x4A,0x8D,0x41,0x39,0x06,
						0x36,0x49,0x41,0x29,0x46,0x48,0x48,0x29,
						0x26,0x20,0x11,0x12,0x2C,0x21,0x19,0x06},
						{0x00,0x34,0x4A,0xCA,0x4A,0x61,0x59,0x01,//马里奥左静止 3
						0x31,0xB9,0xCA,0xCC,0x30,0x00,0x00,0x00,
						0x0C,0x32,0x79,0xAF,0xA5,0xA4,0x4E,0x27,
						0x25,0x68,0xB8,0x90,0x91,0x69,0x06,0x00},
						
						{0x06,0x39,0x41,0x8D,0x4A,0x62,0x59,0x01,//马里奥左奔跑 4
						0x31,0xB9,0xCA,0xCC,0x30,0x80,0x00,0x00,
						0x06,0x19,0x21,0x2C,0x12,0x11,0x20,0x26,
						0x29,0x48,0x48,0x46,0x29,0x41,0x49,0x36},
						
						{0x00,0x00,0x10,0x10,0x10,0xFE,0x08,0x88,//o 5
						0x88,0x80,0x80,0x80,0x24,0x28,0x10,0x00,
						0x00,0x08,0x1C,0x12,0x22,0x7F,0x01,0x10,
						0x20,0x20,0x20,0x10,0x11,0x0E,0x00,0x00},

						{0x00,0x00,0x84,0x78,0xA0,0x20,0x20,0xE2,//me 6
						0x3C,0x20,0x40,0x80,0x00,0x00,0x00,0x00,
						0x00,0x0F,0x10,0x10,0x08,0x05,0x02,0x05,
						0x40,0x40,0x20,0x18,0x07,0x00,0x00,0x00},

						{0x00,0x20,0x60,0x20,0x20,0x20,0xA0,0x60,//de 7
						0x30,0x30,0x10,0x10,0x58,0x90,0x00,0x00,
						0x00,0x00,0x00,0x00,0x00,0x1F,0x20,0x40,
						0x40,0x40,0x40,0x41,0x02,0x04,0x01,0x00},

						{0x00,0x00,0x00,0x00,0x00,0x00,0x04,0xF8,//to 8
						0x80,0x80,0x60,0x40,0x00,0x00,0x00,0x00,
						0x00,0x00,0x00,0x1C,0x22,0x41,0x41,0x41,
						0x40,0x40,0x40,0x40,0x00,0x00,0x00,0x00},

						{0x00,0x00,0x20,0x40,0x41,0x42,0x42,0x2A,//u 9
						0x2A,0x24,0x20,0xC0,0x00,0x00,0x00,0x00,
						0x00,0x00,0x00,0x00,0x40,0x40,0x40,0x20,
						0x10,0x10,0x0C,0x03,0x00,0x00,0x00,0x00},

						{0x00,0x00,0x00,0x00,0x00,0x00,0x02,0xFC,//yo A
						0x40,0x40,0x20,0x30,0x20,0x00,0x00,0x00,
						0x00,0x30,0x48,0x44,0x44,0x44,0x24,0x1F,
						0x08,0x08,0x10,0x10,0x20,0x40,0x00,0x00},

						{0x00,0x00,0x00,0x04,0x08,0x48,0x28,0x28,//ko B
						0x18,0x08,0x08,0x00,0x00,0x00,0x00,0x00,
						0x00,0x00,0x07,0x08,0x10,0x10,0x10,0x10,
						0x10,0x10,0x10,0x18,0x10,0x00,0x00,0x00},

						{0x00,0x80,0x80,0xC2,0xC4,0xA4,0xA4,0x92,//so C
						0x4A,0x44,0x40,0x60,0x40,0x00,0x00,0x00,
						0x00,0x00,0x00,0x00,0x00,0x0E,0x11,0x20,
						0x20,0x20,0x20,0x20,0x00,0x00,0x00,0x00},

						{0x00,0x80,0x60,0xF8,0x07,0x00,0x04,0x24,//shin D
						0x24,0x25,0x26,0x24,0x24,0x24,0x04,0x00,
						0x01,0x00,0x00,0xFF,0x00,0x00,0x00,0xF9,
						0x49,0x49,0x49,0x49,0x49,0xF9,0x00,0x00},

						{0x80,0x80,0x80,0xBE,0xA2,0xA2,0xA2,0xA2,//gou E
						0xA2,0xA2,0xA2,0xBE,0x80,0x80,0x80,0x00,
						0x00,0x00,0x00,0x06,0x05,0x04,0x04,0x04,
						0x44,0x84,0x44,0x3C,0x00,0x00,0x00,0x00},

						{0x80,0x70,0x00,0xFF,0x20,0x10,0x04,0x04,//tou F
						0x04,0x04,0xFC,0x04,0x04,0x04,0x04,0x00,
						0x80,0x60,0x18,0x07,0x08,0x30,0x00,0x00,
						0x40,0x80,0x7F,0x00,0x00,0x00,0x00,0x00},

						{0x00,0x40,0x40,0x44,0x44,0x44,0x44,0xC4,//te 10
						0x44,0x44,0x46,0x44,0x60,0x40,0x00,0x00,
						0x00,0x00,0x80,0x40,0x20,0x18,0x06,0x01,
						0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},

						{0x00,0x00,0x08,0x08,0x08,0x08,0x08,0x08,//su 11
						0x88,0x68,0x18,0x00,0x00,0x00,0x00,0x00,
						0x00,0x00,0x20,0x10,0x08,0x04,0x02,0x01,
						0x02,0x04,0x08,0x10,0x30,0x00,0x00,0x00},

						{0x00,0x00,0x00,0x00,0x00,0xFE,0x20,0x40,//to 12
						0x80,0x80,0x00,0x00,0x00,0x00,0x00,0x00,
						0x00,0x00,0x00,0x00,0x00,0x7F,0x00,0x00,
						0x00,0x01,0x03,0x00,0x00,0x00,0x00,0x00},

						{0x00,0x00,0x20,0x24,0x44,0x88,0x10,0x00,//shi 13
						0x00,0x00,0x80,0x40,0x20,0x00,0x00,0x00,
						0x00,0x00,0x10,0x20,0x20,0x10,0x08,0x04,
						0x02,0x01,0x00,0x00,0x00,0x00,0x00,0x00},

						{0x00,0x00,0x08,0x08,0x08,0x08,0x08,0x08,//su 14
						0x88,0x68,0x18,0x00,0x00,0x00,0x00,0x00,
						0x00,0x00,0x20,0x10,0x08,0x04,0x02,0x01,
						0x02,0x04,0x08,0x10,0x30,0x00,0x00,0x00},

						{0x00,0x40,0x40,0x44,0x44,0x44,0x44,0xC4,//te 15
						0x44,0x44,0x46,0x44,0x60,0x40,0x00,0x00,
						0x00,0x00,0x80,0x40,0x20,0x18,0x06,0x01,
						0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},

						{0x00,0x00,0x00,0x00,0x00,0x00,0xC0,0x38,//mu 16
						0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
						0x00,0x00,0x20,0x70,0x2C,0x23,0x20,0x20,
						0x10,0x12,0x14,0x18,0x70,0x00,0x00,0x00},

						{0x00,0x00,0x00,0xE0,0x18,0x04,0x02,0x00,//（ 17
						0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
						0x00,0x00,0x00,0x07,0x18,0x20,0x40,0x00,
						0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},

						{0x40,0xC0,0x40,0x40,0x40,0x60,0x1C,0x03,//白星 18
						0x1C,0x60,0x40,0x40,0x40,0xC0,0x40,0x00,
						0x00,0x00,0x41,0x39,0x26,0x10,0x10,0x08,
						0x08,0x10,0x26,0x39,0x41,0x00,0x00,0x00},

						{0x00,0x00,0x04,0x1C,0x64,0x84,0x04,0x04,//嘴 19
						0x04,0x84,0x64,0x1C,0x04,0x00,0x00,0x00,
						0x00,0x00,0x00,0x00,0x00,0x01,0x06,0x18,
						0x06,0x01,0x00,0x00,0x00,0x00,0x00,0x00},
						
						{0x00,0x02,0x04,0x18,0xE0,0x00,0x00,0x00,//） 1A
						0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
						0x00,0x40,0x20,0x18,0x07,0x00,0x00,0x00,
						0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
						
						{0x40,0xC0,0xC0,0xC0,0xC0,0xE0,0xFC,0xFF,//黑星 1B
						0xFC,0xE0,0xC0,0xC0,0xC0,0xC0,0x40,0x00,
						0x00,0x00,0x41,0x39,0x3F,0x1F,0x1F,0x0F,
						0x1F,0x1F,0x3F,0x39,0x41,0x00,0x00,0x00},

						{0x00,0x00,0x00,0x00,0xC0,0x38,0x04,0x00,//youshou 1C
						0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
						0x00,0x60,0x18,0x07,0x00,0x00,0x00,0x00,
						0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},

						{0x00,0x04,0x38,0xC0,0x00,0x00,0x00,0x00,//zuoshou 1D
						0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
						0x00,0x00,0x00,0x01,0x06,0x38,0xC0,0x00,
						0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00}



};
//数字字模表，根据自己需要更改 
code unsigned char SZTAB[][16]={
				{0x00,0xE0,0x10,0x08,0x08,0x10,0xE0,0x00,//0 
				0x00,0x0F,0x10,0x20,0x20,0x10,0x0F,0x00},
				{0x00,0x00,0x10,0x10,0xF8,0x00,0x00,0x00,//1 
				0x00,0x00,0x20,0x20,0x3F,0x20,0x20,0x00},
				{0x00,0x70,0x08,0x08,0x08,0x08,0xF0,0x00,//2 
				0x00,0x30,0x28,0x24,0x22,0x21,0x30,0x00},
				{0x00,0x30,0x08,0x08,0x08,0x88,0x70,0x00,//3 
				0x00,0x18,0x20,0x21,0x21,0x22,0x1C,0x00},
				{0x00,0x00,0x80,0x40,0x30,0xF8,0x00,0x00,//4 
				0x00,0x06,0x05,0x24,0x24,0x3F,0x24,0x24},
				{0x00,0xF8,0x88,0x88,0x88,0x08,0x08,0x00,//5 
				0x00,0x19,0x20,0x20,0x20,0x11,0x0E,0x00},
				{0x00,0xE0,0x10,0x88,0x88,0x90,0x00,0x00,//6 
				0x00,0x0F,0x11,0x20,0x20,0x20,0x1F,0x00},
				{0x00,0x18,0x08,0x08,0x88,0x68,0x18,0x00,//7 
				0x00,0x00,0x00,0x3E,0x01,0x00,0x00,0x00},
				{0x00,0x70,0x88,0x08,0x08,0x88,0x70,0x00,//8 
				0x00,0x1C,0x22,0x21,0x21,0x22,0x1C,0x00},
				{0x00,0xF0,0x08,0x08,0x08,0x10,0xE0,0x00,//9 
				0x00,0x01,0x12,0x22,0x22,0x11,0x0F,0x00}



};
//英文字模表，根据自己需要更改 
code unsigned char EETAB[][16]={
				{0x08,0xF8,0x08,0x00,0x00,0x00,0x00,0x00,//L 0
				0x20,0x3F,0x20,0x20,0x20,0x20,0x30,0x00},
				{0xE0,0x10,0x08,0x08,0x08,0x10,0xE0,0x00,//O 1
				0x0F,0x10,0x20,0x20,0x20,0x10,0x0F,0x00},
				{0x00,0x00,0xC0,0x38,0xE0,0x00,0x00,0x00,//A 2
				0x20,0x3C,0x23,0x02,0x02,0x27,0x38,0x20},
				{0x08,0xF8,0x08,0x08,0x08,0x10,0xE0,0x00,//D 3
				0x20,0x3F,0x20,0x20,0x20,0x10,0x0F,0x00},
				{0x00,0x08,0x08,0xF8,0x08,0x08,0x00,0x00,//I 4
				0x00,0x20,0x20,0x3F,0x20,0x20,0x00,0x00},
				{0x08,0xF8,0x30,0xC0,0x00,0x08,0xF8,0x08,//N 5
				0x20,0x3F,0x20,0x00,0x07,0x18,0x3F,0x00},
				{0xC0,0x30,0x08,0x08,0x08,0x38,0x00,0x00,//G 6
				0x07,0x18,0x20,0x20,0x22,0x1E,0x02,0x00},
				{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,//. 7
				0x00,0x30,0x30,0x00,0x00,0x00,0x00,0x00},	

				{0x08,0xF8,0xF8,0x00,0xF8,0xF8,0x08,0x00,//M 8
				0x20,0x3F,0x01,0x3E,0x01,0x3F,0x20,0x00},

				{0x08,0xF8,0x88,0x88,0xE8,0x08,0x10,0x00,//E 9
				0x20,0x3F,0x20,0x20,0x23,0x20,0x18,0x00},

				{0x00,0x70,0x88,0x08,0x08,0x08,0x38,0x00,//S A
				0x00,0x38,0x20,0x21,0x21,0x22,0x1C,0x00},
				
				{0x18,0x08,0x08,0xF8,0x08,0x08,0x18,0x00,//T B
				0x00,0x00,0x20,0x3F,0x20,0x00,0x00,0x00},

				{0x08,0xF8,0x88,0x88,0x88,0x88,0x70,0x00,//R C
				0x20,0x3F,0x20,0x00,0x03,0x0C,0x30,0x20},
			
				{0x08,0xF8,0x88,0x88,0xE8,0x08,0x10,0x00,//E D
				0x20,0x3F,0x20,0x20,0x23,0x20,0x18,0x00},

				{0x08,0xF8,0x08,0x00,0x00,0x08,0xF8,0x08,//U E
				0x00,0x1F,0x20,0x20,0x20,0x20,0x1F,0x00}



};

unsigned char lcd_cache[4];		//LCD显示缓存
// 1.写指令代码子程序(E1)
void WriteCommandE1()
{
  while(CRADD1 & 0x80);
  CWADD1 = Command;
}

// 2.写显示数据子程序(E1)
void WriteDataE1()
{
  while(CRADD1 & 0x80);
  DWADD1 = LCDData;
}

// 3.读显示数据子程序(E1)
void ReadDataE1()
{
  while(CRADD1 & 0x80);
  LCDData = DRADD1;
}

// 4.写指令代码子程序(E2)
void WriteCommandE2()
{
  while(CRADD2 & 0x80);
  CWADD2 = Command;
}

// 5.写显示数据子程序(E2)
void WriteDataE2()
{
  while(CRADD2 & 0x80);
  DWADD2 = LCDData;
}

// 6.读显示数据子程序(E2)
void ReadDataE2()
{
  while(CRADD2 & 0x80);
  LCDData = DRADD2;
}

//LCD初始化接口
void Init()
{
  Command = 0xe2;
  WriteCommandE1();
  WriteCommandE2();

  Command = 0xa4;
  WriteCommandE1();
  WriteCommandE2();

  Command = 0xa9;
  WriteCommandE1();
  WriteCommandE2();

  Command = 0xa0;
  WriteCommandE1();
  WriteCommandE2();

  Command = 0xc0;
  WriteCommandE1();
  WriteCommandE2();

  Command = 0xaf;
  WriteCommandE1();
  WriteCommandE2();
}

// 清屏接口
void Clear()
{
  unsigned char i,j;

  i = 0;
  do {

    Command = (i + 0xb8); // 页地址设置
    WriteCommandE1();
    WriteCommandE2();

    Command = 0x00;      // 列地址设置为"0"
    WriteCommandE1();
    WriteCommandE2();

    j = 0x50;            // 一页清 80个字节
    do {
      LCDData = 0x00;    // 显示数据为"0"
      WriteDataE1();
      WriteDataE2();
    }while(--j !=0);     // 页内字节清零循环

  }while(++i !=4);       // 页地址暂存器加一
                         // 显示区清零循环
}


// 中文显示接口
void WriteCHN16x16()
{
  unsigned char i,j,k;
  i = 0;
  j = 0;
  while(j<2) {
    Command = ((Page_ + j) & 0x03) | 0xb8;   // 设置页地址
    WriteCommandE1();
    WriteCommandE2();
    k = Column;                   // 列地址值
    while(k < Column + 16){
      if (k < PD1) {              // 为左半屏显示区域(E1)
        Command = k;
        WriteCommandE1();         // 设置列地址值
        LCDData = CCTAB[Code_][i]; // 取汉字字模数据
        WriteDataE1();            // 写字模数据
      } else{                     // 为右半屏显示区域(E2)
        Command = k-PD1;
        WriteCommandE2();         // 设置列地址值
        LCDData = CCTAB[Code_][i]; // 取汉字字模数据
        WriteDataE2();            // 写字模数据
      };

      i++;
      if( ++k >= PD1 * 2) break;  // 列地址是否超出显示范围
    } ;
    j++;
  };
}
///////////////////////////////////////////////////

void WriteEN8x16()								//字母显示接口
{
  unsigned char i,j,k;	
   i = 0;
   j = 0;
  while(j<2) {
    Command = ((Page_ + j) & 0x03) | 0xb8;   
    WriteCommandE1( );
    WriteCommandE2( );
    k = Column;                   
    while(k < Column + 8){
      if (k < PD1) {             
        Command = k;
        WriteCommandE1( );         
        LCDData = EETAB[Code_][i]; 
        WriteDataE1( );            
      } else{                     
        Command = k-PD1;
        WriteCommandE2( );         
        LCDData = EETAB[Code_][i]; 
        WriteDataE2( );           
      };
      i++;
      if( ++k >= PD1 * 2) break;  
    };
    j++;
  };
}


void WriteSZ8x16()										//数字显示接口
{
  unsigned char i,j,k;	
   i = 0;
   j = 0;
  while(j<2) {
    Command = ((Page_ + j) & 0x03) | 0xb8;   
    WriteCommandE1( );
    WriteCommandE2( );
    k = Column;                   
    while(k < Column + 8){
      if (k < PD1) {             
        Command = k;
        WriteCommandE1( );         
        LCDData = SZTAB[Code_][i]; 
        WriteDataE1( );            
      } else{                     
        Command = k-PD1;
        WriteCommandE2( );         
        LCDData = SZTAB[Code_][i]; 
        WriteDataE2( );           
      };
      i++;
      if( ++k >= PD1 * 2) break;  
    };
    j++;
  };
}
/////////////////////////////////////////////////////////////////////////////
////////以下根据自己需要更改
/////////////////////////////////////////////////
void start(){
		int n=0x08;
		int p;
	  Page_ = 0x03;											//G
		Column = n;
		Code_ = 0x06;
		WriteEN8x16();
		n=n+8;
		for(p=0;p<30000;p++);
		Page_ = 0x03;											//A
		Column = n;
		Code_ = 0x02;
		WriteEN8x16();
		n=n+8;
		for(p=0;p<30000;p++);
	  Page_ = 0x03;											//M
		Column = n;
		Code_ = 0x08;
		WriteEN8x16();
		n=n+8;
		for(p=0;p<30000;p++);							
	  Page_ = 0x03;											//E
		Column = n;
		Code_ = 0x09;
		WriteEN8x16();
		n=n+8;
		for(p=0;p<30000;p++);
	  Page_ = 0x03;											//S
		Column = n;
		Code_ = 0x0A;
		WriteEN8x16();
		n=n+8;
		for(p=0;p<30000;p++);
	  Page_ = 0x03;											//T
		Column = n;
		Code_ = 0x0B;
		WriteEN8x16();
		n=n+8;
		for(p=0;p<30000;p++);
	  Page_ = 0x03;											//A
		Column = n;
		Code_ = 0x02;
		WriteEN8x16();
		n=n+8;
		for(p=0;p<30000;p++);
	  Page_ = 0x03;											//R
		Column = n;
		Code_ = 0x0C;
		WriteEN8x16();
		n=n+8;
		for(p=0;p<30000;p++);
	  Page_ = 0x03;											//T
		Column = n;
		Code_ = 0x0B;
		WriteEN8x16();
		n=n+8;
		for(p=0;p<30000;p++);				
}
/////////////////////////////////////////////////////////////////
//选择界面
void select(){
		Clear();
		WriteEN8x16();
		Page_ = 0x03;											//D
		Column =0x00;
		Code_ = 0x03;
		WriteEN8x16();
		Page_ = 0x03;											//E
		Column =0x08;
		Code_ = 0x0D;
		WriteEN8x16();
		
		Page_ = 0x03;											//M
		Column =0x18;
		Code_ = 0x08;
		WriteEN8x16();
		Page_ = 0x03;											//U
		Column =0x20;
		Code_ = 0x0E;
		WriteEN8x16();
			
		Page_ = 0x03;											//M
		Column =0x30;
		Code_ = 0x08;
		WriteEN8x16();
		Page_ = 0x03;											//A
		Column =0x38;
		Code_ = 0x02;
		WriteEN8x16();	

		Page_ = 0x03;											//L
		Column =0x48;
		Code_ = 0x00;
		WriteEN8x16();
		Page_ = 0x03;											//D
		Column =0x50;
		Code_ = 0x03;
		WriteEN8x16();
		
		Page_ = 0x03;											//L
		Column =0x60;
		Code_ = 0x00;
		WriteEN8x16();
		Page_ = 0x03;											//S
		Column =0x68;
		Code_ = 0x0A;
		WriteEN8x16();		

}

/////////////////////////////////////////////////
void print(unsigned int a2){								//通关动画
		int i=0;
		Clear();
		Page_ = 0x03;
		Column = 0x10;
		Code_ = a2;
		WriteCHN16x16();
		a2++;
		for(i=0;i<30000;i++)
		Page_ = 0x03;
		Column = 0x20;
		Code_ = a2;
		WriteCHN16x16();	
		a2++;
		for(i=0;i<30000;i++)	
		Page_ = 0x03;
		Column = 0x30;
		Code_ = a2;
		WriteCHN16x16();
		a2++;
		for(i=0;i<30000;i++)	
		Page_ = 0x03;
		Column = 0x40;
		Code_ = a2;
		WriteCHN16x16();
		a2++;
		for(i=0;i<30000;i++)		
		Page_ = 0x03;
		Column = 0x50;
		Code_ = a2;
		WriteCHN16x16();
		a2++;
		for(i=0;i<30000;i++)		
		Page_ = 0x03;
		Column = 0x50;
		Code_ = a2;
		WriteCHN16x16();
}


/////////////////////////////////////////////////////////////////////////////
void game(unsigned int a,unsigned int b){								   //游戏接口
	unsigned int i=0;
			Clear();
			Page_ = 0x03;
			Column = 0x00;
			Code_ = 0x01;
			WriteCHN16x16();
			Page_ = 0x03;										//终点刷新
			Column = 0x70;
			Code_ = 0x00;
			WriteCHN16x16();

	while(1){
	if(TestKey()){
			key=GetKey();
			switch(key){

				case 0x0b:
				Clear();												//先左静止
				Page_ = 0x03;
				Column = a;
				Code_ = 0x03;
				WriteCHN16x16();	
				
				Page_ = 0x03;										//终点刷新
				Column = 0x70;
				Code_ = 0x00;
				WriteCHN16x16();
				for(i=0;i<300;i++);								//延时
			
				Clear();												
				Page_ = 0x03;										//再左奔跑
				Column = a;
				Code_ = 0x04;
				WriteCHN16x16();
				Page_ = 0x03;										//终点刷新
				Column = 0x70;
				Code_ = 0x00;
				WriteCHN16x16();
			if(a==0){							//判断是否在起点开始
					a=a;
					b=b;
			}
			else{
					a=a-16;
					b--;													//行动计数
			}
				for(i=0;i<300;i++);								//延时
			
				Clear();												
				Page_ = 0x03;										//再左奔跑
				Column = a;
				Code_ = 0x04;
				WriteCHN16x16();
				Page_ = 0x03;										//终点刷新
				Column = 0x70;
				Code_ = 0x00;
				WriteCHN16x16();
				
				for(i=0;i<300;i++);								//延时
				
				Clear();												
				Page_ = 0x03;										//再左静止
				Column = a;
				Code_ = 0x03;
				WriteCHN16x16();
				Page_ = 0x03;										//终点刷新
				Column = 0x70;
				Code_ = 0x00;
				WriteCHN16x16();
				
				break;
				
				case 0x0f:
					
				Clear();												
				
				Page_ = 0x03;										//右静止
				Column = a;
				Code_ = 0x01;
				WriteCHN16x16();
						
				Page_ = 0x03;										//终点刷新
				Column = 0x70;
				Code_ = 0x00;
				WriteCHN16x16();
				
				for(i=0;i<300;i++);		
				Clear();
					 
				Page_ = 0x03;										//右奔跑
				Column = a;
				Code_ = 0x02;
				WriteCHN16x16();
							
				Page_ = 0x03;										//终点刷新
				Column = 0x70;
				Code_ = 0x00;
				WriteCHN16x16();				
				
				if(b==7){					
					print(0x05);												//游戏通关             
					return;													//返回开始菜单					
				}
				else{
					a=a+16;
					b++;
				}
				for(i=0;i<300;i++);								//延时
				
				Clear();
				 
				Page_ = 0x03;										//右奔跑
				Column = a;
				Code_ = 0x02;
				WriteCHN16x16();
						
				Page_ = 0x03;										//终点刷新
				Column = 0x70;
				Code_ = 0x00;
				WriteCHN16x16();
				
				for(i=0;i<300;i++);								//延时			
				
				Clear();
				 
				Page_ = 0x03;										//右静止
				Column = a;
				Code_ = 0x01;
				WriteCHN16x16();
						
				Page_ = 0x03;										//终点刷新
				Column = 0x70;
				Code_ = 0x00;
				WriteCHN16x16();
				break;
				
				case 0x0e:return;break;
				
				default:break;
			}
			
			
			}
	}
}
/////////////////////////////////////////////////////////////////////////////
void dyna(unsigned int cs){								//动态显示接口
	int j=0;
	int i;
	int q;
	int q1;
	if(cs==0){
		i=ws;
	}
	else{
		i=bs;
	}		
	q=32;
	
		Page_ = 0x02;
		Column = q;
		Code_ =i;
		WriteCHN16x16();
		q=q+32;
		Page_ = 0x02;
		Column = q;
		Code_ = i;
		WriteCHN16x16();
		Page_ = 0x02;
		Column = 0x10;
		Code_ = 0x17;
		WriteCHN16x16();
		Page_ = 0x02;
		Column = 0x30;
		Code_ = 0x19;
		WriteCHN16x16();
		Page_ = 0x02;
		Column = 0x50;
		Code_ = 0x1A;
		WriteCHN16x16();
		if(flag==0&&flag1==1) {
		Page_ = 0x02;
		Column = 0x60;
		Code_ = 0x1C;
		WriteCHN16x16();
		}
		if(flag==1&&flag1==0) {
		Page_ = 0x02;
		Column = 0x00;
		Code_ = 0x1D;
		WriteCHN16x16();		
		}
		
			 //东西向
	 lcd_cache[0]=count/10;					//高位
	 lcd_cache[1]=count%10;				 	//低位

	 lcd_cache[0]=Disp_Tab2[lcd_cache[0]];
	 lcd_cache[1]=Disp_Tab2[lcd_cache[1]];

	 //南北向
	 lcd_cache[2]=count1/10;			 	 //高位
	 lcd_cache[3]=count1%10;				 //低位

	 lcd_cache[2]=Disp_Tab2[lcd_cache[2]];
	 lcd_cache[3]=Disp_Tab2[lcd_cache[3]];
	 		
	 q=0x20;
	 q1=0x40;
	 
		Page_ = 0x04;
		Column = q;
		Code_ = lcd_cache[0];
		WriteSZ8x16();
		q=q+8;
		Page_ = 0x04;
		Column = q;
		Code_ = lcd_cache[1];
		WriteSZ8x16();
		Page_ = 0x04;
		Column = q1;
		Code_ = lcd_cache[2];
		WriteSZ8x16();
		q1=q1+8;
		Page_ = 0x04;
		Column = q1;
		Code_ = lcd_cache[3];
		WriteSZ8x16();

}


/////////////////////////////////////////////////////////
void print_ini2(){												//显示LOADING接口
	
  Page_ = 0x02;
  Column = 0x00;
  Code_ = 0x00;
  WriteEN8x16();

  Page_ = 0x02;
  Column = 0x08;
  Code_ = 0x01;
  WriteEN8x16();

  Page_ = 0x02;
  Column = 0x10;
  Code_ = 0x02;
  WriteEN8x16();

  Page_ = 0x02;
  Column = 0x18;
  Code_ = 0x03;
  WriteEN8x16();

  Page_ = 0x02;
  Column = 0x20;
  Code_ = 0x04;
  WriteEN8x16();

  Page_ = 0x02;
  Column = 0x28;
  Code_ = 0x05;
  WriteEN8x16();
	
	Page_ = 0x02;
  Column = 0x30;
  Code_ = 0x06;
  WriteEN8x16();
	
	Page_ = 0x02;
  Column = 0x38;
  Code_ = 0x07;
  WriteEN8x16();
	
	Page_ = 0x02;
  Column = 0x40;
  Code_ = 0x07;
  WriteEN8x16();
	
	Page_ = 0x02;
  Column = 0x48;
  Code_ = 0x07;
  WriteEN8x16();
	
}



void LCD_show(unsigned int n){								//LOADING接口
	int j=0;
	int p;
	Clear();

	for(j;j<14;j++){	
		p=0;
		print_ini2();	
	  Page_ = 0x04;
		Column = n;
		Code_ = 0x07;
		WriteEN8x16();
		n=n+8;
		for(p;p<30000;p++);
	}		
}

void LCD_show_2(unsigned int a1){             //动画接口	 a1根据需要更改
	int j=0;
	int i=0;
	int p;
	int q;
	int k=0;
	int s=0;
	int cs=0;//星星闪烁标志
	Clear();
	a1=0x0A;
	
	q=0;
	for(j;j<3;j++){
		p=0;	
		Page_ = 0x03;
		Column = q;
		Code_ = a1;
		WriteCHN16x16();
		q=q+32;
		a1++;
		for(p;p<30000;p++);
	}	
	Clear();
	j=0;		

	q=0;
	for(j;j<6;j++){			
		p=0;
		Page_ = 0x02;
		Column = q;
		Code_ = a1;
		WriteCHN16x16();
		q=q+16;
		a1++;
		for(p;p<30000;p++);
	}	
	j=0;		

	q=0;
	for(j;j<4;j++){			
		p=0;
		Page_ = 0x04;
		Column = q;
		Code_ = a1;
		WriteCHN16x16();
		q=q+32;
		a1++;
		for(p;p<30000;p++);
	}	
	
		Clear();
		
		for(i;i<20;i++){    //动画10帧
			
		j=0;		
		q=0;
		for(j;j<7;j++){			//刷新一次动画
			p=0;
			if(cs==0){
			Page_ = 0x03;
			Column = q;
			Code_ = bs;
			WriteCHN16x16();}
			else{
			Page_ = 0x03;
			Column = q;
			Code_ = ws;
			WriteCHN16x16();
			}
			q=q+16;
			cs=~cs;}
			for(p;p<30000;p++);	         	
		j=0;		
		q=0;
		for(j;j<7;j++){			//刷新一次动画
			p=0;
			if(cs==0){
			Page_ = 0x03;
			Column = q;
			Code_ = bs;
			WriteCHN16x16();}
			else{
			Page_ = 0x03;
			Column = q;
			Code_ = ws;
			WriteCHN16x16();
			}
			q=q+16;
			cs=~cs;}
			for(p;p<30000;p++);
		
	}		
	Clear();
}

/////////////////////////////////////////////////
void op(unsigned int p){					
  	Clear();				//清屏
	LCD_show(0);
	for(p;p<30;p++);
	Clear();
}